<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>ADB remote debug | Macfred&#39;s Pages</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Sometimes we may need to work on a remote machine, edit or debug .etc, in which case adb seems not working at all, because it must be running on a local machine. Emulator might be helpful, however, w">
<meta name="keywords" content="Android,Debug">
<meta property="og:type" content="article">
<meta property="og:title" content="ADB remote debug">
<meta property="og:url" content="https://macfreds.github.io/2019/03/30/ADB-remote-debug/index.html">
<meta property="og:site_name" content="Macfred&#39;s Pages">
<meta property="og:description" content="Sometimes we may need to work on a remote machine, edit or debug .etc, in which case adb seems not working at all, because it must be running on a local machine. Emulator might be helpful, however, w">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://i.loli.net/2019/03/31/5c9fb5ff46c7e.png">
<meta property="og:image" content="https://i.loli.net/2019/03/31/5c9fb6c583391.png">
<meta property="og:image" content="https://i.loli.net/2019/03/31/5c9fb6c583391.png">
<meta property="og:image" content="https://i.loli.net/2019/03/31/5c9fb79312693.png">
<meta property="og:image" content="https://i.loli.net/2019/03/31/5c9fb8adee760.png">
<meta property="og:image" content="https://i.loli.net/2019/03/31/5c9fb96f07133.png">
<meta property="og:image" content="https://i.loli.net/2019/03/31/5c9fa5213cccd.png">
<meta property="og:updated_time" content="2019-03-31T06:41:03.788Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ADB remote debug">
<meta name="twitter:description" content="Sometimes we may need to work on a remote machine, edit or debug .etc, in which case adb seems not working at all, because it must be running on a local machine. Emulator might be helpful, however, w">
<meta name="twitter:image" content="https://i.loli.net/2019/03/31/5c9fb5ff46c7e.png">
  
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Macfred&#39;s Pages</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">...</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://macfreds.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-ADB-remote-debug" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/30/ADB-remote-debug/" class="article-date">
  <time datetime="2019-03-30T15:45:30.000Z" itemprop="datePublished">2019-03-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech/">Tech</a>►<a class="article-category-link" href="/categories/Tech/Android/">Android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      ADB remote debug
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> Sometimes we may need to work on a remote machine, edit or debug .etc, in which case adb seems not working at all, because it must be running on a local machine. Emulator might be helpful, however, we just need to debug on a specific device ocationaly. Here comes the solution.</p>
<h2 id="Preparations"><a href="#Preparations" class="headerlink" title="Preparations"></a>Preparations</h2><p>ADB is implemented on a classic Client-Server structure, in which server side interact with android device on usb link, and is involked by client through port <strong>5037</strong>. The only step is just simply connect adb client running on remote machine with adb server on local machine using <strong>port forwarding</strong>.<br>You need to install Android SDK on both local and remote machines, and add {ANDROID_SDK}/platform_tools folder as environment variable.</p>
<h3 id="ADB-server-side"><a href="#ADB-server-side" class="headerlink" title="ADB server side"></a>ADB server side</h3><p>In our solution, adb server runs on local machine. Except adb server, SSH server are needed as well which provides port forwarding funcionality. In our case we use <strong><a href="https://www.bitvise.com/ssh-server" title="Bitwise" target="_blank" rel="noopener">Bitwise SSH server</a></strong> on windows platform, you might choose your own favorable implementaton on other platform.</p>
<p><img src="https://i.loli.net/2019/03/31/5c9fb5ff46c7e.png" alt="Bitwise server config step 1"><br><img src="https://i.loli.net/2019/03/31/5c9fb6c583391.png" alt="Bitwise server config step 2"><br><img src="https://i.loli.net/2019/03/31/5c9fb6c583391.png" alt="Bitwise server config step 3"><br><img src="https://i.loli.net/2019/03/31/5c9fb79312693.png" alt="Bitwise server config step 4"><br><img src="https://i.loli.net/2019/03/31/5c9fb8adee760.png" alt="Bitwise server config step 5"><br><img src="https://i.loli.net/2019/03/31/5c9fb96f07133.png" alt="Bitwise server config step 6"></p>
<h3 id="ADB-client-side"><a href="#ADB-client-side" class="headerlink" title="ADB client side"></a>ADB client side</h3><p>ADB clinet runs on remote machine, what we have to do is just simply connect to ssh server from remote machine. On windows, <strong><a href="https://www.putty.org/" title="putty" target="_blank" rel="noopener">Putty</a></strong> is a popular ssh clinet, go with the following steps.</p>
<ol>
<li>Input ip and ssh port of your local machine.</li>
<li>Add <strong>5037</strong> as forwarded port, and let <strong>localhost:5037</strong> be destination.</li>
<li>Save putty configuration for later reuse.</li>
<li>Connect to ssh server.</li>
</ol>
<p><img src="https://i.loli.net/2019/03/31/5c9fa5213cccd.png" alt="Putty forward config"></p>
<h2 id="Final-setup"><a href="#Final-setup" class="headerlink" title="Final setup"></a>Final setup</h2><p>Before everything is done, we have to verify that adb client on remote machine can recongize adb server on local machine.</p>
<ol>
<li>On local machine, open a cmd terminal, input “<strong>adb devices</strong>“ command to detect connected android devices. You can also do this in ssh session terminal from remote machine. Go to next step if your devices are listed in the output.</li>
<li>On remote machine, open a cmd terminal, input “<strong>adb devices</strong>“ command. If your devices are listed again here, congrate! You can now work on adb remote debug session!</li>
</ol>
<h2 id="Important-notice"><a href="#Important-notice" class="headerlink" title="Important notice"></a>Important notice</h2><ol>
<li>You must ensure that adb on both machine are of the same version, refer to “<strong>adb version</strong>“ command for more information.</li>
<li>On adb client side, if adb server cannot be recongized, adb client will start a adb server on the same machine, after this adb server on local machine won’t recongized any more. You must start adb server on local machine and open ssh session before everything, ensure that <strong><em>adb server won’t be running on remote machine</em></strong>. It is highly recommended that start Android Studio after adb remote debug session is established.</li>
<li>You can use adb client function on both local and remote machine at the same time, however, only one debug session can be setup up at a time. You might have to terminate Android Studio for another machine machine to seize control of debugging.</li>
<li>Some Android device manager utility on desktop may be integrated with adb in it’s own package, if you have installed this on your remote machine, <strong>it may interfere with our setup!</strong> Keep that in mind if remote debug just don’t work when everything seems to be done.</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://macfreds.github.io/2019/03/30/ADB-remote-debug/" data-id="cjtwl7h3k0000bbizfag7k21n" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Debug/">Debug</a></li></ul>

    </footer>
  </div>
  
    
  
</article>

</section>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 macfred<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>



<script src="/js/script.js"></script>



  </div>
</body>
</html>